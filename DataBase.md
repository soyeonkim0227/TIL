## commit이란?

- 데이터베이스에서 영구적인 변경을 확정하는 일.

## 스키마란?

- 고립성 이해안됨
- 완전성이랑 확장성

# DataBase

- 왜 사용?
- 애플리케이션에서의 데이터는 램에서 존재하는데, 램은 휘발성 메모리라서 애플리케이션 종료 시 메모리에 존재했던 데이터를 다시 읽어 들일 수 없음. 따라서 데이터를 장기적으로 보관하기 위해서 별도의 데이터베이스를 만들어 사용함.

- 관계형 데이터베이스
: 데이터를 서로 상호관련성을 가진 형태로 표현한 데이터.

- 관계형 데이터베이스 특징
- 모든 데이터들은 2차원 테이블들로 표현함.
- 각각의 테이블은 row(행, 로우)와 column(열, 컬럼)로 구성되며, row는 각 항목들의 실제 값들이고, column은 테이블의 각 항목을 말함.
- 각각의 row는 저만의 고유 키(Primary Key)가 있으며, 주로 이 primary key를 통해서 해당 row를 찾거나 인용(reference)하게 됨.
- 각각의 테이블들은 서로 상호관련성을 가지고 서로 연결될 수 있음.

- 비관계형 데이터베이스
- 비관계형 데이터베이스는 NoSQL로 명칭.
- 비관계형이기 때문에 데이터들을 저장하기 전에 테이블을 정의할 필요가 없음.
- MongoDB, Redis, Cassandra 등이 가장 대표적인 NoSQL 데이터 베이스임.

# 테이블(table) 관계의 3종류

- One To One 
: 테이블 A의 로우와 테이블 B의 로우가 정확히 일대일 매칭이 되는 관계.
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7c8c028d-2c24-48c4-b1d4-2a8559cb8589/Untitled.png)
    

- One To Many
: 테이블 A의 로우가 테이블 B의 여러 로우와 연결이 되는 관계.
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2e9ca53b-1c51-4d47-b3a4-bbac0b4881da/Untitled.png)
    

- Many To Many
: 테이블 A의 여러 로우가 테이블 B의 여러 로우와 연결이 되는 관계.
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/12a7cabc-d827-4985-8535-7bbfca494126/Untitled.png)
    

- 테이블 왜 나눔?
- 테이블을 나누어 저장하고 필요한 테이블끼리 연결하면 중복된 데이터도없고, 서로 같은 데이터지만 부분적으로 다른 데이터가 생기는 문제를 해결할 수 있음.
- 만약 고객이 개명을 해서 아이디는 동일한데 이름이 다른 로우가 있을 경우, 어떤 이름이 정확한지 구별하기 힘들게 됨.

# 트랜잭션(Transaction)

- 데이터베이스의 쿼리(데이터베이스에 정보를 요청하는 것)를 가장 작은 단위의 업무로 쪼갠 것을 트랜잭션(Transaction)이라고 함.
- ACID를 제공함을 트랜잭션(일련의 작업들을 한 번에 하나의 unit으로 실행하는 것)이 안전하게 수행된다는 것을 보장함
- 트랜잭션은 일련의 작업들이 마치 하나의 작업처럼 취급되어서 모두 다 성공하거나 아니면 모두 다 실패하게 됨. (commit & rollback)

- 트랜잭션의 4가지 속성 (ACID)
- 원자성 (Atomicity)
: 트랜잭션과 관련된 작업들이 부분적으로 실행 되다가 중단되지 않는다는 것을 보장하는 능력.
: 예를 들어, 자금 이체는 성공할 수도 실패할 수도 있지만 보내는 쪽에서 돈을 빼 오는 작업만 성공하고 받는 쪽에 돈을 넣는 작업을 실패해서는 안됨.

- 일관성 (Consistency)
: 트랜잭션이 실행을 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 유지하는 것.

- 고립성 (Isolation)
: 트랜잭션 수행 시 다른 트랜잭션의 연산 작업에 끼어들지 못 하도록 보장하는 것.
: 트랜잭션 밖에 있는 어떠한 연산도 중간 단계의 데이터를 볼 수 없음을 의미
: 트랜잭션 실행 내역은 연속적이어야 함을 의미.

- 지속성 (Durability)
: 성공적으로 수행된 트랜잭션은 영원히 반영되어야 함.
: 일반적으로 모든 트랜잭션은 로그로 남고 시스템 장애 발생 전 상태로 되돌릴 수 있음.
: 트랜잭션은 로그에 모든 것이 저장된 후에만 commit 상태로 간주될 수 있음.

|  | SQL | NoSQL |
| --- | --- | --- |
| 장점 | 1. 관계형 데이터베이스는 데이터를 더 효율적이고 체계적으로 저장할 수 있고 관리할 수 있음.
2. 미리 저장하는 데이터들의 구조 (테이블 스키마)를 정의함으로 데이터의 완전성이 보장됨.
3. 트랜잭션 | 1. 데이터 구조를 미리 정의하지 않아도 됨으로 저장하는 데이터의 구조변화에 유연함.
2. 확장하기 비교적 쉬움. 그냥 서버 수를 늘리면 됨.
3. 방대한 양의 데이터를 저장하는 데 유리함. |
| 단점 | 1. 테이블을 미리 정의해야 함으로 테이블 구조 변화에 덜 유연함.
2. 확장성이 쉽지 않음. | 1. 데이터의 완전성이 덜 보장됨.
2. 트랜잭션이 안되거나 비교적 불안정함. |
| 어디에 유용 | 정형화된 데이터들 그리고 데이터의 완전성이 중요한 데이터들을 저장하는 데 유리
(은행 계좌 정보) | 주로 비정형화 데이터 그리고 완전성이 상대적으로 덜 유리한 데이터를 저장하는데 유리.
(로그 데이터) |
